:root{
  --nav-h: 58px; --nav-m: 12px;
  --nav-bg: rgba(44, 82, 78, .82);
  --nav-txt:#ffffff; --nav-accent:#9ED0C6; --nav-brand:#3AA79B;
}

/* page offset for fixed header */
body{ padding-top: calc(var(--nav-h) + var(--nav-m) * 2); }

/* fixed shell — raised z-index to beat chat bubbles */
#dc-shell{
  position:fixed; top:0; left:0; right:0;
  z-index:2147480000;                 /* was 99999 */
  pointer-events:none; transform: translateZ(0);
}

/* rounded, floating bar */
#dc-bar{
  pointer-events:auto; position:relative; z-index:2147480001;
  height: var(--nav-h);
  max-width: 1080px;
  margin: var(--nav-m) auto;
  padding: 0 14px;
  display:flex; align-items:center; justify-content:space-between;
  background: var(--nav-bg);
  backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px);
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 18px 48px rgba(0,0,0,.32), inset 0 1px 0 rgba(255,255,255,.12);
  font-family: Verdana, Geneva, sans-serif;
}

.dc-brand{ display:flex; align-items:center; gap:10px; color:#fff; text-decoration:none; }
.dc-brand:hover{ color:var(--nav-accent); }

/* menu */
.dc-menu{ list-style:none; display:flex; gap:22px; margin:0; padding:0; }
.dc-menu > li{ position:relative; }
.dc-link{ position:relative; color:var(--nav-txt); text-decoration:none; font-size:18px; line-height:1; padding:10px 6px; display:inline-flex; align-items:center; gap:6px; }
.dc-link:hover{ color:var(--nav-accent); }
.dc-link::after{ content:""; position:absolute; left:8px; right:8px; bottom:-6px; height:2px; background: var(--nav-accent); transform:scaleX(0); transform-origin:left; transition:transform .18s ease; }
.dc-link:hover::after{ transform:scaleX(1); }
/* ACTIVE state */
.dc-link.is-active{ color: var(--nav-accent); }
.dc-link.is-active::after{ transform: scaleX(1); }
.caret{ font-size:12px; opacity:.8 }

/* dropdown (glassy + rounded) */
.dc-drop{
  position:absolute; left:0; top:calc(100% + 10px);
  background: rgba(44, 82, 78, .78);
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 18px 48px rgba(0,0,0,.38);
  padding: 10px;
  opacity: 0; transform: translateY(-6px);
  pointer-events: none; transition: opacity .18s ease, transform .18s ease;
}
/* bridge so hover doesn’t collapse */
.dc-menu > li::after{ content:""; position:absolute; left:0; right:0; top:100%; height:12px; }
.dc-menu > li:hover .dc-drop{ opacity:1; transform:translateY(0); pointer-events:auto; }

/* dropdown items as pills */
.dc-drop a{
  display:block; padding:10px 14px; margin:6px 2px; border-radius:999px;
  background: rgba(158, 208, 198, .12);
  border: 1px solid rgba(158, 208, 198, .28);
  color:#fff; text-decoration:none; font-size:16px; line-height:1.2;
  transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
}
.dc-drop a:hover, .dc-drop a:focus{ background: rgba(158, 208, 198, .22); box-shadow: 0 6px 18px rgba(0,0,0,.26); transform: translateY(-1px); outline:none; }

/* hamburger — keep above everything */
.dc-burger{
  display:none; cursor:pointer; width:36px; height:28px;
  align-items:center; justify-content:center;
  position:relative; z-index:2147480003;
}
.dc-burger span{ width:26px; height:3px; background:#fff; display:block; position:relative; }
.dc-burger span::before, .dc-burger span::after{ content:""; position:absolute; left:0; width:26px; height:3px; background:#fff; }
.dc-burger span::before{ top:-8px } .dc-burger span::after{ top:8px }

/* iOS safe-area */
@supports (padding: max(0px)) {
  body{ padding-top: calc(var(--nav-h) + var(--nav-m)*2 + env(safe-area-inset-top)) !important; }
  #dc-bar{
    margin-top: calc(var(--nav-m) + env(safe-area-inset-top)) !important;
    max-width: min(1080px, calc(100% - 2*var(--nav-m) - env(safe-area-inset-left) - env(safe-area-inset-right))) !important;
  }
}
html{-webkit-text-size-adjust:100%;}

/* mobile */
@media (max-width: 820px){
  :root{ --nav-h: 56px; --nav-m: 10px; }
  .dc-brand img{ height:30px !important; }
  .dc-burger{ display:flex; }

  .dc-menu{
    position: fixed; left: 50%;
    transform: translate(-50%, -140%);
    top: calc(var(--nav-h) + var(--nav-m)*2 + env(safe-area-inset-top));
    width: calc(100% - 22px); max-width: 720px;
    border-radius: 14px;
    background: rgba(44,82,78,.96);
    border: 1px solid rgba(255,255,255,.10);
    box-shadow: 0 14px 28px rgba(0,0,0,.25);
    overflow: hidden; z-index:2147480002;
    flex-direction:column; gap:0; margin:0; padding:0;
  }
  .dc-menu.open{ transform: translate(-50%, 0); }
  .dc-menu.open{
    max-height: calc(100vh - (var(--nav-h) + var(--nav-m)*2 + env(safe-area-inset-top)) - 16px);
    overflow-y:auto; -webkit-overflow-scrolling:touch;
  }

  .dc-menu > li{ border-top:1px solid rgba(255,255,255,.08); }
  .dc-link{ padding:14px 16px; font-size:18px; width:100%; justify-content:space-between; }
  .dc-link::after{ display:none; }

  .dc-drop{
    position: static !important; display:none;
    margin:6px 10px 12px; border-radius:12px;
    background: rgba(44,82,78,.92);
    backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  }
  .dc-menu > li.open .dc-drop{ display:block; }

  /* OPTIONAL: nudge away from a top-right chat bubble */
  #dc-bar{ padding-right:48px; }
  .dc-menu{ left:48%; }
  .dc-menu.open{ transform: translate(-48%, 0); }
}

/* blur fallback */
@supports not ((backdrop-filter: blur(4px)) or (-webkit-backdrop-filter: blur(4px))){
  #dc-bar{ background: rgba(44,82,78,.95) !important; }
  .dc-drop{ background: rgba(44,82,78,.95) !important; }
}

/* ---------- iOS final fixes ---------- */

/* runtime-safe var */
:root { --safe-top: env(safe-area-inset-top); }

/* use runtime var for spacing */
body{ padding-top: calc(var(--nav-h) + var(--nav-m)*2 + var(--safe-top)) !important; }
#dc-bar{ margin-top: calc(var(--nav-m) + var(--safe-top)) !important; }

/* mobile menu below bar w/ dynamic safe area */
@media (max-width: 820px){
  .dc-menu{ top: calc(var(--nav-h) + var(--nav-m)*2 + var(--safe-top)); }
}

/* anchors land below header */
[id]{ scroll-margin-top: calc(var(--nav-h) + var(--nav-m)*2 + var(--safe-top) + 8px); }

/* protect fixed positioning */
html, body, #main { transform: none !important; }

/* avoid iOS input zoom reflow */
input, select, textarea { font-size: 16px; }
